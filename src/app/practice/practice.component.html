<section class="usa-grid usa-section">
  <!-- Show message if connected to practice -->
  <h2>Connect to practice</h2>
  <p>Enter the name or NPI of the practice you would like to connect to and click "search"</p>
  <p>Don't see the practice you're searching for? <a href="#">Contact Practice Registrar</a> or call 1-800-NNN-NNNN for
    assistance.</p>
  <div class="usa-alert usa-alert-info">
    <div class="usa-alert-body">
      <p class="usa-alert-text">Your request will be in a "pending" state until it is approved by the practice.</p>
      <p class="usa-alert-text">This usually takes 1-3 business days. If you don't want to connect right now, <a
              [routerLink]="['/dashboard']">visit your dashboard</a>.</p>
    </div>
  </div>
  <div class="usa-grid margin-top-1">
    <h6>Practice name or NPI</h6>
    <div class="usa-width-one-half">
      <form class="usa-search usa-search-big">
        <div role="search">
          <label class="usa-sr-only" for="search-field-big">practice name or NPI</label>
          <input id="search-field-big" type="search" name="search" [(ngModel)]="model.query">
          <button type="submit" (click)="search()">
            <span class="usa-search-submit-text">Search</span>
          </button>
        </div>
      </form>
    </div>
  </div>
  <div class="usa-alert usa-alert-success" *ngIf="connected">
    <div class="usa-alert-body">
      <h3 class="usa-alert-heading">Your Connection Request in in process.</h3>
      <p class="usa-alert-text">All requests must be approved by the practice. This usually takes 1-3 business days.</p>
      <p class="usa-alert-text">In the meantime, you can request to connect to any additional practices you need access
        to, or return to the <a [routerLink]="['/dashboard']">dashboard</a>.</p>
    </div>
  </div>

  <table class="usa-table-borderless">
    <thead>
    <tr>
      <th scope="col">Practice</th>
      <th scope="col">NPI</th>
      <th scope="col">Your Role</th>
      <th scope="col">Connect</th>
    </tr>
    </thead>
    <tbody *ngFor="let provider of providers">
    <tr ngForm="connectForm" #connectForm="ngForm">
      <th scope="row" class="max-width-250">{{provider.name}}</th>
      <td>{{provider.npi}}</td>
      <td>
        <select name="user-roles" id="user-role" [(ngModel)]="model.role">
          <option *ngFor="let role of roles" [value]="rolesEnum[role]">{{role}}</option>
        </select>
      </td>

      <td>
        <button (click)="connect(provider, model.role)" *ngIf="model.role">Request to Connect</button>
        <span *ngIf="!model.role" class="usa-color-text-secondary-dark">Select Role</span>
      </td>
    </tr>
    </tbody>
  </table>
</section>
